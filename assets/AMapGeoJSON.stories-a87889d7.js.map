{"version":3,"file":"AMapGeoJSON.stories-a87889d7.js","sources":["../../src/helpers/geoJSONHelper.ts","../../src/helpers/coordsOfGeoJSON2AMapPolygonPath.ts"],"sourcesContent":["export const isPosition = (pos: any): pos is GeoJSON.Position => (\n  Array.isArray(pos)\n      && pos.length === 2\n      && typeof pos[0] === 'number'\n      && typeof pos[1] === 'number'\n);\n\nexport const isLineCoords = (\n  line: any,\n): line is GeoJSON.Position[] => Array.isArray(line) && line.length >= 2 && line.every(isPosition);\n\nexport const isSamePosition = (positionA: GeoJSON.Position, positionB: GeoJSON.Position) => {\n  if (!isPosition(positionA) || !isPosition(positionB)) {\n    throw Error('invalid position');\n  }\n\n  return positionA === positionB || positionA.toString() === positionB.toString();\n};\n\nexport const isRingLineCoords = (coords: GeoJSON.Position[]) => {\n  if (!isLineCoords(coords)) return false;\n  const coordsLen = coords.length;\n  const firstPosition = coords[0];\n  const lastPosition = coords[coordsLen - 1];\n  return coordsLen > 3 && isSamePosition(firstPosition, lastPosition);\n};\n","import { isLineCoords, isRingLineCoords } from './geoJSONHelper';\n\nconst coordsOfGeoJSONRingLine2AMapPolygonPath = (coords: GeoJSON.Position[]): typeof coords => {\n  const len = coords.length;\n  return coords.slice(0, len - 1);\n};\n\n/**\n * 去掉最后一个 Position 点。\n * 支持 GeoJSON.Polygon 和 GeoJSON.MultiplePolygon 转换\n */\nconst coordsOfGeoJSON2AMapPolygonPath = (\n  coords: GeoJSON.Position[] | GeoJSON.Polygon['coordinates'] | GeoJSON.MultiPolygon['coordinates'],\n): typeof coords => {\n  if (isRingLineCoords(coords as GeoJSON.Position[])) {\n    return coordsOfGeoJSONRingLine2AMapPolygonPath(coords as GeoJSON.Position[]);\n  }\n\n  if (isLineCoords(coords)) {\n    return coords;\n  }\n\n  // trick way\n  return (coords as GeoJSON.MultiPolygon['coordinates']).map(coordsOfGeoJSON2AMapPolygonPath) as typeof coords;\n};\n\nexport default coordsOfGeoJSON2AMapPolygonPath;\n"],"names":["isPosition","pos","isLineCoords","line","isSamePosition","positionA","positionB","isRingLineCoords","coords","coordsLen","firstPosition","lastPosition","coordsOfGeoJSONRingLine2AMapPolygonPath","len","coordsOfGeoJSON2AMapPolygonPath"],"mappings":"4QAAO,MAAMA,EAAcC,GACzB,MAAM,QAAQA,CAAG,GACVA,EAAI,SAAW,GACf,OAAOA,EAAI,CAAC,GAAM,UAClB,OAAOA,EAAI,CAAC,GAAM,SAGdC,EACXC,GAC+B,MAAM,QAAQA,CAAI,GAAKA,EAAK,QAAU,GAAKA,EAAK,MAAMH,CAAU,EAEpFI,EAAiB,CAACC,EAA6BC,IAAgC,CAC1F,GAAI,CAACN,EAAWK,CAAS,GAAK,CAACL,EAAWM,CAAS,EACjD,MAAM,MAAM,kBAAkB,EAGhC,OAAOD,IAAcC,GAAaD,EAAU,SAAS,IAAMC,EAAU,UACvE,EAEaC,EAAoBC,GAA+B,CAC1D,GAAA,CAACN,EAAaM,CAAM,EAAU,MAAA,GAClC,MAAMC,EAAYD,EAAO,OACnBE,EAAgBF,EAAO,CAAC,EACxBG,EAAeH,EAAOC,EAAY,CAAC,EACzC,OAAOA,EAAY,GAAKL,EAAeM,EAAeC,CAAY,CACpE,ECvBMC,EAA2CJ,GAA8C,CAC7F,MAAMK,EAAML,EAAO,OACnB,OAAOA,EAAO,MAAM,EAAGK,EAAM,CAAC,CAChC,EAMMC,EACJN,GAEID,EAAiBC,CAA4B,EACxCI,EAAwCJ,CAA4B,EAGzEN,EAAaM,CAAM,EACdA,EAIDA,EAA+C,IAAIM,CAA+B"}